spring.application.name=Sell-the-old-Car
server.port=9000
server.address=0.0.0.0
# ===============================================
# DATABASE CONFIGURATION
# ===============================================
# WARNING: DO NOT use hardcoded database credentials in production!
# Set these as environment variables: DB_URL, DB_USERNAME, DB_PASSWORD
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/carselling}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:12345}
spring.datasource.hikari.auto-commit=false

spring.datasource.driver-class-name=org.postgresql.Driver

# ===============================================
# JPA & HIBERNATE CONFIGURATION
# ===============================================
spring.jpa.hibernate.ddl-auto=create


spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# ===============================================
# JWT SECURITY CONFIGURATION
# ===============================================
# WARNING: DO NOT use hardcoded secrets in production!
# Set these as environment variables: JWT_SECRET, JWT_EXPIRATION_MS, JWT_REFRESH_EXPIRATION_MS
app.jwt.secret=${JWT_SECRET:ce33afceccb6e0e7b4ae7029ed4f5d9cad4c33af1fdf7696d6c7931c8b0b156eefb4de1dbd17c580f4e5e3196644ee98cbab03cfaf93df9a9aac549f8727551557f665fb4a026f0616bcef4db504163b047a6c04f3ee2a397499fd8493051675aec30de24c5e3171ff4bc424d959293b4961a9eac99d82168970e7667980ae10ae717dc45cb6ecf3abaf930f4f7abd1ee5722a3c3087ac66f552cf71c1de0ab81f978499095383f1c3a84be7fabf5206f96befb3f90b20c7525faef2fd8d048b19ed13db29a5cd429bc9b98722fb29f8f1a4458906365f40583360406c4622beba6274bb19f9df41e0662852039c1ca3221efebdc661ff934b46db4822bbd08b}
# JWT Token Expiration Configuration:
# Access token: 2 weeks = 14 days * 24 hours * 60 min * 60 sec * 1000 ms = 1209600000 ms
# Refresh token: 4 weeks = 28 days * 24 hours * 60 min * 60 sec * 1000 ms = 2419200000 ms
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:1209600000}
app.jwt.refresh-token-expiration-ms=${JWT_REFRESH_EXPIRATION_MS:2419200000}

# ===============================================
# LOGGING CONFIGURATION
# ===============================================
# Suppress benign security warning for custom AuthenticationProvider
logging.level.org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer=ERROR
# Set more detailed logging for security and application packages
logging.level.org.springframework.security=DEBUG
logging.level.com.carselling.oldcar=TRACE

# ===============================================
# DATABASE-BACKED MESSAGE BROKER (PostgreSQL only)
# ===============================================
# Using PostgreSQL for all chat data persistence

# ===============================================
# WEBSOCKET CONFIGURATION
# ===============================================
# WebSocket connection settings
spring.websocket.allowedOrigins=${WEBSOCKET_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080}
spring.websocket.broker.host=${WEBSOCKET_BROKER_HOST:localhost}
spring.websocket.broker.port=${WEBSOCKET_BROKER_PORT:61613}

# Chat system settings
app.chat.max-message-length=1000
app.chat.max-messages-per-minute=30
app.chat.typing-timeout=10000
app.chat.online-timeout=300000

# ===============================================
# REDIS CONFIGURATION (OPTIONAL)
# ===============================================
# Redis is used for caching and rate limiting. If Redis is not available,
# the application will fall back to in-memory caching.
# WARNING: DO NOT use hardcoded Redis credentials in production!
# Set these as environment variables: REDIS_HOST, REDIS_PORT, REDIS_PASSWORD
spring.redis.host=${REDIS_HOST:localhost}
spring.redis.port=${REDIS_PORT:6379}
spring.redis.password=${REDIS_PASSWORD:}
spring.redis.timeout=${REDIS_TIMEOUT:2000ms}
spring.redis.database=${REDIS_DATABASE:0}

# Redis connection pool settings (Lettuce)
spring.redis.lettuce.pool.max-active=${REDIS_POOL_MAX_ACTIVE:8}
spring.redis.lettuce.pool.max-idle=${REDIS_POOL_MAX_IDLE:8}
spring.redis.lettuce.pool.min-idle=${REDIS_POOL_MIN_IDLE:0}
spring.redis.lettuce.pool.max-wait=${REDIS_POOL_MAX_WAIT:-1ms}
spring.redis.lettuce.shutdown-timeout=${REDIS_SHUTDOWN_TIMEOUT:100ms}

# Application-specific Redis settings
app.redis.enabled=false
app.redis.fallback-to-memory=${REDIS_FALLBACK_ENABLED:true}
app.redis.health-check.enabled=${REDIS_HEALTH_CHECK:true}
app.redis.health-check.interval=${REDIS_HEALTH_CHECK_INTERVAL:30s}
management.health.redis.enabled=false
management.health.mail.enabled=false
management.health.elasticsearch.enabled=false

# ===============================================
# RATE LIMITING CONFIGURATION
# ===============================================
# Rate limiting using Redis-backed Bucket4j
# Set RATE_LIMIT_ENABLED=false to disable rate limiting
app.rate-limit.enabled=${RATE_LIMIT_ENABLED:true}

# Bucket configuration
# Maximum number of requests allowed in the time window
app.rate-limit.capacity=${RATE_LIMIT_CAPACITY:100}

# Number of tokens to refill per time period
app.rate-limit.refill-tokens=${RATE_LIMIT_REFILL_TOKENS:10}

# Refill period in minutes (how often to add refill-tokens)
app.rate-limit.refill-period-minutes=${RATE_LIMIT_REFILL_PERIOD:1}

# Fail-safe behavior when rate limiting encounters errors
# true = allow requests through on errors, false = block requests on errors
app.rate-limit.fail-open=${RATE_LIMIT_FAIL_OPEN:true}

# Enable detailed logging for rate limiting (useful for debugging)
app.rate-limit.debug-logging=${RATE_LIMIT_DEBUG_LOGGING:false}

# ===============================================
# EMAIL CONFIGURATION
# ===============================================
# WARNING: DO NOT use hardcoded email credentials in production!
# Set these as environment variables: MAIL_HOST, MAIL_PORT, MAIL_USERNAME, MAIL_PASSWORD
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=yashborse432005@gmail.com
spring.mail.password=zmjnvveurgvmoavf
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true


# ===============================================
# ELASTICSEARCH CONFIGURATION
# ===============================================
# Disable Elasticsearch repositories for now (can be enabled later when Elasticsearch is running)
spring.data.elasticsearch.repositories.enabled=false

# Disable Redis repositories to prevent conflicts with JPA repositories
spring.data.redis.repositories.enabled=false

# ===============================================
# ACTUATOR CONFIGURATION
# ===============================================
management.endpoints.web.exposure.include=health,info,metrics


logging.level.root=INFO
logging.level.com.myapp=DEBUG
debug=true

# ===============================================
# FIREBASE CONFIGURATION
# ===============================================
firebase.config.path=carimages-9cf9a-firebase-adminsdk-fbsvc-e1758d62b8.json
firebase.storage.bucket=carimages-9cf9a.appspot.com
firebase.project.id=carimages-9cf9a

