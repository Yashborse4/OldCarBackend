spring.application.name=Sell-the-old-Car
server.port=9000
server.address=0.0.0.0
# ===============================================
# DATABASE CONFIGURATION
# ===============================================
# WARNING: DO NOT use hardcoded database credentials in production!
# Set these as environment variables: DB_URL, DB_USERNAME, DB_PASSWORD
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/carselling}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:12345}
spring.datasource.driver-class-name=org.postgresql.Driver

# ===============================================
# JPA & HIBERNATE CONFIGURATION
# ===============================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Explicit dialect is not needed and has been removed as per recommendation.
spring.jpa.open-in-view=false

# ===============================================
# JWT SECURITY CONFIGURATION
# ===============================================
# WARNING: DO NOT use hardcoded secrets in production!
# Set these as environment variables: JWT_SECRET, JWT_EXPIRATION_MS, JWT_REFRESH_EXPIRATION_MS
app.jwt.secret=${JWT_SECRET:#{null}}
app.jwt.expiration-ms=${JWT_EXPIRATION_MS:86400000}
app.jwt.refresh-token-expiration-ms=${JWT_REFRESH_EXPIRATION_MS:604800000}

# ===============================================
# LOGGING CONFIGURATION
# ===============================================
# Suppress benign security warning for custom AuthenticationProvider
logging.level.org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer=ERROR
# Set more detailed logging for security and application packages
logging.level.org.springframework.security=DEBUG
logging.level.com.carselling.oldcar=TRACE

# ===============================================
# DATABASE-BACKED MESSAGE BROKER (PostgreSQL only)
# ===============================================
# Using PostgreSQL for all chat data persistence

# ===============================================
# WEBSOCKET CONFIGURATION
# ===============================================
# WebSocket connection settings
spring.websocket.allowedOrigins=${WEBSOCKET_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:8080}
spring.websocket.broker.host=${WEBSOCKET_BROKER_HOST:localhost}
spring.websocket.broker.port=${WEBSOCKET_BROKER_PORT:61613}

# Chat system settings
app.chat.max-message-length=1000
app.chat.max-messages-per-minute=30
app.chat.typing-timeout=10000
app.chat.online-timeout=300000

# ===============================================
# ACTUATOR CONFIGURATION
# ===============================================
management.endpoints.web.exposure.include=health,info,metrics


logging.level.root=INFO
logging.level.com.myapp=DEBUG
debug=true

# ===============================================
# RATE LIMITING CONFIGURATION
# ===============================================
app.rate-limit.enabled=true
app.rate-limit.capacity=100
app.rate-limit.refill-tokens=10
app.rate-limit.refill-period-minutes=1
